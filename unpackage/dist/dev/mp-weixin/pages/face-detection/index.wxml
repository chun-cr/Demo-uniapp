<view class="page-container"><block wx:if="{{!isDectecting}}"><camera style="{{'height:'+(cameraHeight+'px')+';'}}" mode="normal" device-position="{{devicePosition}}" resolution="high" frame-size="medium" data-event-opts="{{[['error',[['handleCamera',['$event']]]]]}}" binderror="__e"><view class="camera-overlay"><block wx:if="{{faceRect.visible}}"><view class="face-rect" style="{{'top:'+(faceRect.x+'px')+';'+('left:'+(faceRect.y+'px')+';')+('width:'+(faceRect.width+'px')+';')+('height:'+(faceRect.height+'px')+';')}}"><view class="face-rect-border"></view><view class="face-rect-points"><block wx:for="{{facePoints}}" wx:for-item="point" wx:for-index="index" wx:key="index"><view class="face-point" style="{{'top:'+(point.y*scaleX+'px')+';'+('left:'+(point.x*scaleY+'px')+';')}}"></view></block></view></view></block><view class="center-area"><view class="center-rect"></view><view class="center-dot"></view></view></view></camera></block><block wx:if="{{isDetecting}}"><view class="result-container"><image class="result-image" src="{{resultImg}}" mode="withFix"></image><view class="result-title">检测结果</view><view class="info-item"><text class="label">面部位置：</text><text class="value">{{facePosition.visible?'('+facePosition.x+', '+facePosition.y+')':'未检测到人脸'}}</text></view><view class="info-item"><text class="label">面部大小：</text><text class="value">{{faceSize}}</text></view><view class="info-item"><text class="label">置信度：</text><text class="value">{{confidence}}</text></view></view></block><view class="contro-panel"><view class="status-info"><text class="{{['status-text',statusClass]}}">{{statusText}}</text><block wx:if="{{qualifiedTime>o}}"><text class="countdown">{{''+qualifiedTime+''}}</text></block></view><view class="button-group"><block wx:if="{{!isScanning&&!isDetecting}}"><button class="btn start-btn" disabled="{{isLoading}}" data-event-opts="{{[['tap',[['startDetection',['$event']]]]]}}" bindtap="__e"><view class="btn-icon">▶</view><text class="btn-text">开始检测</text></button></block><block wx:if="{{isScanning&&!isDetecting}}"><button data-event-opts="{{[['tap',[['stopDetection',['$event']]]]]}}" class="btn stop-btn" bindtap="__e"><view class="btn-icon">⏸</view><text class="btn-text">停止检测</text></button></block><block wx:if="{{isDetecting}}"><button data-event-opts="{{[['tap',[['restartDetection',['$event']]]]]}}" class="btn restart-btn" bindtap="__e"><view class="btn-icon">↻</view><text class="btn-text">重新检测</text></button></block><button class="btn flip-btn" disabled="{{isScanning||isDetecting}}" data-event-opts="{{[['tap',[['switchCamera',['$event']]]]]}}" bindtap="__e"><view class="btn-icon">🔄</view><text class="btn-text">切换摄像头</text></button><block wx:if="{{isLoading}}"><view class="loading-overlay"><view class="loading-spinner"></view><text class="loading-text">初始化中...</text></view></block></view></view></view>